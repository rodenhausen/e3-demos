<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title id="title">
Tap: demo_abstract
  </title>
  <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" rel="stylesheet"/>
  <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" rel="stylesheet"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js">
  </script>
  <script charset="utf-8" src="https://d3js.org/d3.v3.min.js">
  </script>
  <script id="dataAdjacency" type="text/json">
   {"directed": true, "graph": {}, "nodes": [{"group": "2", "id": "2.I"}, {"group": "2", "id": "2.H"}, {"group": "2", "id": "2.C"}, {"group": "2", "id": "2.B"}, {"group": "2", "id": "2.A"}, {"group": "2", "id": "2.G"}, {"group": "2", "id": "2.F"}, {"group": "2", "id": "2.E"}, {"group": "1", "id": "1.D"}, {"group": "1", "id": "1.E"}, {"group": "1", "id": "1.F"}, {"group": "1", "id": "1.G"}, {"group": "1", "id": "1.A"}, {"group": "1", "id": "1.B"}, {"group": "1", "id": "1.C"}, {"group": "1", "id": "1.H"}, {"group": "1", "id": "1.I"}], "links": [{"source": 0, "relation": "taxonomy_incoming.2", "target": 6, "key": 0}, {"source": 1, "relation": "taxonomy_incoming.2", "target": 3, "key": 0}, {"source": 1, "relation": "equals", "target": 15, "key": 0}, {"source": 2, "relation": "taxonomy_incoming.2", "target": 3, "key": 0}, {"source": 3, "relation": "taxonomy_outgoing.2", "target": 1, "key": 0}, {"source": 3, "relation": "taxonomy_outgoing.2", "target": 2, "key": 0}, {"source": 3, "relation": "taxonomy_incoming.2", "target": 4, "key": 0}, {"source": 3, "relation": "taxonomy_outgoing.2", "target": 7, "key": 0}, {"source": 3, "relation": "overlaps", "target": 10, "key": 0}, {"source": 3, "relation": "includes", "target": 13, "key": 0}, {"source": 4, "relation": "taxonomy_outgoing.2", "target": 3, "key": 0}, {"source": 4, "relation": "taxonomy_outgoing.2", "target": 6, "key": 0}, {"source": 4, "relation": "equals", "target": 12, "key": 0}, {"source": 5, "relation": "equals", "target": 11, "key": 0}, {"source": 5, "relation": "taxonomy_incoming.2", "target": 6, "key": 0}, {"source": 6, "relation": "overlaps", "target": 10, "key": 0}, {"source": 6, "relation": "taxonomy_incoming.2", "target": 4, "key": 0}, {"source": 6, "relation": "taxonomy_outgoing.2", "target": 5, "key": 0}, {"source": 6, "relation": "taxonomy_outgoing.2", "target": 0, "key": 0}, {"source": 7, "relation": "taxonomy_incoming.2", "target": 3, "key": 0}, {"source": 7, "relation": "equals", "target": 9, "key": 0}, {"source": 8, "relation": "taxonomy_incoming.1", "target": 13, "key": 0}, {"source": 9, "relation": "equals", "target": 7, "key": 0}, {"source": 9, "relation": "taxonomy_incoming.1", "target": 13, "key": 0}, {"source": 10, "relation": "overlaps", "target": 3, "key": 0}, {"source": 10, "relation": "taxonomy_outgoing.1", "target": 11, "key": 0}, {"source": 10, "relation": "taxonomy_outgoing.1", "target": 15, "key": 0}, {"source": 10, "relation": "taxonomy_incoming.1", "target": 12, "key": 0}, {"source": 10, "relation": "overlaps", "target": 6, "key": 0}, {"source": 11, "relation": "taxonomy_incoming.1", "target": 10, "key": 0}, {"source": 11, "relation": "equals", "target": 5, "key": 0}, {"source": 12, "relation": "equals", "target": 4, "key": 0}, {"source": 12, "relation": "taxonomy_outgoing.1", "target": 10, "key": 0}, {"source": 12, "relation": "taxonomy_outgoing.1", "target": 16, "key": 0}, {"source": 12, "relation": "taxonomy_outgoing.1", "target": 13, "key": 0}, {"source": 13, "relation": "taxonomy_outgoing.1", "target": 8, "key": 0}, {"source": 13, "relation": "taxonomy_outgoing.1", "target": 9, "key": 0}, {"source": 13, "relation": "is_included_in", "target": 3, "key": 0}, {"source": 13, "relation": "taxonomy_incoming.1", "target": 12, "key": 0}, {"source": 13, "relation": "taxonomy_outgoing.1", "target": 14, "key": 0}, {"source": 14, "relation": "taxonomy_incoming.1", "target": 13, "key": 0}, {"source": 15, "relation": "taxonomy_incoming.1", "target": 10, "key": 0}, {"source": 15, "relation": "equals", "target": 1, "key": 0}, {"source": 16, "relation": "taxonomy_incoming.1", "target": 12, "key": 0}], "multigraph": true}
  </script>
  <script id="dataAdjacency1x1" type="text/json">
   {"directed": true, "graph": {}, "nodes": [{"group": "2", "id": "2.I"}, {"group": "2", "id": "2.H"}, {"group": "2", "id": "2.C"}, {"group": "2", "id": "2.B"}, {"group": "2", "id": "2.A"}, {"group": "2", "id": "2.G"}, {"group": "2", "id": "2.F"}, {"group": "2", "id": "2.E"}, {"group": "1", "id": "1.D"}, {"group": "1", "id": "1.E"}, {"group": "1", "id": "1.F"}, {"group": "1", "id": "1.G"}, {"group": "1", "id": "1.A"}, {"group": "1", "id": "1.B"}, {"group": "1", "id": "1.C"}, {"group": "1", "id": "1.H"}, {"group": "1", "id": "1.I"}], "links": [{"source": 9, "relation": "equals", "target": 7, "key": 0}, {"source": 10, "relation": "overlaps", "target": 3, "key": 0}, {"source": 10, "relation": "overlaps", "target": 6, "key": 0}, {"source": 11, "relation": "equals", "target": 5, "key": 0}, {"source": 12, "relation": "equals", "target": 4, "key": 0}, {"source": 13, "relation": "is_included_in", "target": 3, "key": 0}, {"source": 15, "relation": "equals", "target": 1, "key": 0}], "multigraph": true}
  </script>
  <style type="text/css">
   .container {
	width: initial;
	padding-right: 0px;
	padding-left: 0px;
	margin-left: 0px;
	margin-right: 0px;
}
div#visualization button#zoomin {
  position: absolute;
  right: 30px;
  top: 50px;
  z-index: 99;
}
div#visualization button#zoomout {
  position: absolute;
  right: 30px;
  top: 80px;
  z-index: 99;
}	
div#visualization button#reset {
  position: absolute;
  right: 30px;
  top: 110px;
  z-index: 99;
}


div#adjacency1x1 text.activeLegend {
  fill: khaki;
  font-weight: bold;
}
div#adjacency1x1 text.activeTick {
   fill: khaki;
   font-weight: bold;
}
div#adjacency1x1 button#zoomin {
  position: absolute;
  right: 30px;
  top: 50px;
  z-index: 99;
}
div#adjacency1x1 button#zoomout {
  position: absolute;
  right: 30px;
  top: 80px;
  z-index: 99;
}	
div#adjacency1x1 button#reset {
  position: absolute;
  right: 30px;
  top: 110px;
  z-index: 99;
}


div#adjacency text.activeLegend {
  fill: khaki;
  font-weight: bold;
}
div#adjacency text.activeTick {
   fill: khaki;
   font-weight: bold;
}
div#adjacency button#zoomin {
  position: absolute;
  right: 30px;
  top: 50px;
  z-index: 99;
}
div#adjacency button#zoomout {
  position: absolute;
  right: 30px;
  top: 80px;
  z-index: 99;
}	
div#adjacency button#reset {
  position: absolute;
  right: 30px;
  top: 110px;
  z-index: 99;
}
  </style>
 </head>
 <body>
  <div class="container">
   <ul class="nav nav-tabs">
    <li class="active">
     <a data-toggle="tab" href="#cleantax">
      Cleantax
     </a>
    </li>
    <li>
     <a data-toggle="tab" href="#visualization">
      Visualization
     </a>
    </li>
    <li>
     <a data-toggle="tab" href="#adjacency1x1">
      Adjacency 1x1
     </a>
    </li>
    <li>
     <a data-toggle="tab" href="#adjacency">
      Adjacency
     </a>
    </li>
   </ul>
   <div class="tab-content">
    <div class="tab-pane fade in active" id="cleantax">
     <textarea cols="150" disabled="" id="cleantax-textarea" rows="30">taxonomy 1 Taxonomy1
(A B F I)
(F G H)
(B C D E)

taxonomy 2 Taxonomy2
(A B F)
(F G I)
(B C E H)

articulation
[1.A equals 2.A]
[1.E equals 2.E]
[1.G equals 2.G]
[1.H equals 2.H]
[1.B is_included_in 2.B]
[1.C 1.D lsum 2.C]
[1.F overlaps 2.B]
[1.F overlaps 2.F]
</textarea>
    </div>
    <div class="tab-pane fade" id="visualization">
     <button id="zoomin">
      Zoom in
     </button>
     <button id="zoomout">
      Zoom out
     </button>
     <button id="reset">
      Reset
     </button>
<svg height="456pt" viewbox="0.00 0.00 756.87 456.00" width="757pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <g class="graph" id="graph0" transform="scale(1 1) rotate(0) translate(4 452)">
  <title>
   %3
  </title>
  <polygon fill="white" points="-4,4 -4,-452 752.872,-452 752.872,4 -4,4" stroke="none">
  </polygon>
  <!-- 1.A -->
  <g class="node" id="node1">
   <title>
    1.A
   </title>
   <polygon fill="#ccffcc" points="133,-250 79,-250 79,-214 133,-214 133,-250" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="106" y="-228.3">
    1.A
   </text>
  </g>
  <!-- 1.I -->
  <g class="node" id="node2">
   <title>
    1.I
   </title>
   <polygon fill="#ccffcc" points="224,-326 170,-326 170,-290 224,-290 224,-326" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="197" y="-304.3">
    1.I
   </text>
  </g>
  <!-- 1.A&#45;&gt;1.I -->
  <g class="edge" id="edge3">
   <title>
    1.A-&gt;1.I
   </title>
   <path d="M126.176,-258.515C133.331,-267.294 141.935,-276.681 151,-284 156.649,-288.561 163.296,-292.663 169.722,-296.131" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="128.716,-256.082 119.791,-250.372 123.207,-260.401 128.716,-256.082" stroke="#000000">
   </polygon>
  </g>
  <!-- 1.F -->
  <g class="node" id="node5">
   <title>
    1.F
   </title>
   <polygon fill="#ccffcc" points="315,-347 261,-347 261,-311 315,-311 315,-347" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="288" y="-325.3">
    1.F
   </text>
  </g>
  <!-- 1.A&#45;&gt;1.F -->
  <g class="edge" id="edge5">
   <title>
    1.A-&gt;1.F
   </title>
   <path d="M142.602,-245.629C166.267,-255.214 197.709,-268.974 224,-284 237.887,-291.937 252.476,-302.219 264.114,-310.95" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="143.881,-242.371 133.297,-241.912 141.285,-248.872 143.881,-242.371" stroke="#000000">
   </polygon>
  </g>
  <!-- 1.B -->
  <g class="node" id="node7">
   <title>
    1.B
   </title>
   <polygon fill="#ccffcc" points="224,-212 170,-212 170,-176 224,-176 224,-212" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="197" y="-190.3">
    1.B
   </text>
  </g>
  <!-- 1.A&#45;&gt;1.B -->
  <g class="edge" id="edge4">
   <title>
    1.A-&gt;1.B
   </title>
   <path d="M142.514,-216.837C151.682,-212.922 161.381,-208.781 169.966,-205.116" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="141.044,-213.659 133.222,-220.804 143.793,-220.096 141.044,-213.659" stroke="#000000">
   </polygon>
  </g>
  <!-- 2.A -->
  <g class="node" id="node14">
   <title>
    2.A
   </title>
   <polygon fill="#ffffcc" points="748.872,-224.544 748.872,-239.456 733.056,-250 710.689,-250 694.872,-239.456 694.872,-224.544 710.689,-214 733.056,-214 748.872,-224.544" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="721.872" y="-228.3">
    2.A
   </text>
  </g>
  <!-- 1.A&#45;&gt;2.A -->
  <g class="edge" id="edge22">
   <title>
    1.A-&gt;2.A
   </title>
   <path d="M109.931,-213.795C119.246,-159.104 150.272,-0 196,-0 196,-0 196,-0 631.872,-0 677.601,-0 708.627,-159.104 717.941,-213.795" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="395" y="-3.8">
    ==
   </text>
  </g>
  <!-- 1.D -->
  <g class="node" id="node3">
   <title>
    1.D
   </title>
   <polygon fill="#ccffcc" points="315,-170 261,-170 261,-134 315,-134 315,-170" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="288" y="-148.3">
    1.D
   </text>
  </g>
  <!-- 2C+ -->
  <g class="node" id="node18">
   <title>
    2C+
   </title>
   <ellipse cx="395" cy="-151" fill="#ffffff" rx="18" ry="18" stroke="black">
   </ellipse>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="395" y="-147.3">
    +
   </text>
  </g>
  <!-- 1.D&#45;&gt;2C+ -->
  <g class="edge" id="edge21">
   <title>
    1.D-&gt;2C+
   </title>
   <path d="M315.225,-151.75C334.541,-151.566 360.251,-151.321 376.961,-151.162" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="341.5" y="-155.8">
    in
   </text>
  </g>
  <!-- 1.E -->
  <g class="node" id="node4">
   <title>
    1.E
   </title>
   <polygon fill="#ccffcc" points="315,-94 261,-94 261,-58 315,-58 315,-94" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="288" y="-72.3">
    1.E
   </text>
  </g>
  <!-- 2.E -->
  <g class="node" id="node17">
   <title>
    2.E
   </title>
   <polygon fill="#ffffcc" points="494,-38.5442 494,-53.4558 478.184,-64 455.816,-64 440,-53.4558 440,-38.5442 455.816,-28 478.184,-28 494,-38.5442" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="467" y="-42.3">
    2.E
   </text>
  </g>
  <!-- 1.E&#45;&gt;2.E -->
  <g class="edge" id="edge25">
   <title>
    1.E-&gt;2.E
   </title>
   <path d="M315.117,-71.5734C348.582,-65.9014 406.26,-56.1255 439.776,-50.4448" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="341.5" y="-72.8">
    ==
   </text>
  </g>
  <!-- 1.G -->
  <g class="node" id="node6">
   <title>
    1.G
   </title>
   <polygon fill="#ccffcc" points="422,-393 368,-393 368,-357 422,-357 422,-393" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="395" y="-371.3">
    1.G
   </text>
  </g>
  <!-- 1.F&#45;&gt;1.G -->
  <g class="edge" id="edge8">
   <title>
    1.F-&gt;1.G
   </title>
   <path d="M324.652,-344.619C338.772,-350.805 354.712,-357.788 367.745,-363.498" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="325.789,-341.296 315.225,-340.489 322.98,-347.708 325.789,-341.296" stroke="#000000">
   </polygon>
  </g>
  <!-- 1.H -->
  <g class="node" id="node9">
   <title>
    1.H
   </title>
   <polygon fill="#ccffcc" points="422,-347 368,-347 368,-311 422,-311 422,-347" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="395" y="-325.3">
    1.H
   </text>
  </g>
  <!-- 1.F&#45;&gt;1.H -->
  <g class="edge" id="edge1">
   <title>
    1.F-&gt;1.H
   </title>
   <path d="M325.469,-329C339.384,-329 354.962,-329 367.745,-329" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="325.225,-325.5 315.225,-329 325.225,-332.5 325.225,-325.5" stroke="#000000">
   </polygon>
  </g>
  <!-- 2.B -->
  <g class="node" id="node13">
   <title>
    2.B
   </title>
   <polygon fill="#ffffcc" points="657.872,-224.544 657.872,-239.456 642.056,-250 619.689,-250 603.872,-239.456 603.872,-224.544 619.689,-214 642.056,-214 657.872,-224.544" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="630.872" y="-228.3">
    2.B
   </text>
  </g>
  <!-- 1.F&#45;&gt;2.B -->
  <g class="edge" id="edge17">
   <title>
    1.F-&gt;2.B
   </title>
   <path d="M315.168,-319.485C330.475,-314.063 350.225,-307.313 368,-302 463.792,-273.367 489.781,-273.613 585.872,-246 592.036,-244.229 598.644,-242.197 604.817,-240.241" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="467" y="-285.8">
    &gt;&lt;
   </text>
  </g>
  <!-- 2.F -->
  <g class="node" id="node16">
   <title>
    2.F
   </title>
   <polygon fill="#ffffcc" points="657.872,-366.544 657.872,-381.456 642.056,-392 619.689,-392 603.872,-381.456 603.872,-366.544 619.689,-356 642.056,-356 657.872,-366.544" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="630.872" y="-370.3">
    2.F
   </text>
  </g>
  <!-- 1.F&#45;&gt;2.F -->
  <g class="edge" id="edge18">
   <title>
    1.F-&gt;2.F
   </title>
   <path d="M302.779,-347.228C317.025,-364.565 340.948,-389.761 368,-402 448.758,-438.537 482.178,-443.148 566.872,-417 584.84,-411.453 602.258,-398.829 614.209,-388.687" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="467" y="-436.8">
    &gt;&lt;
   </text>
  </g>
  <!-- 2.G -->
  <g class="node" id="node15">
   <title>
    2.G
   </title>
   <polygon fill="#ffffcc" points="566.809,-388.544 566.809,-403.456 550.774,-414 528.098,-414 512.064,-403.456 512.064,-388.544 528.098,-378 550.774,-378 566.809,-388.544" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="539.436" y="-392.3">
    2.G
   </text>
  </g>
  <!-- 1.G&#45;&gt;2.G -->
  <g class="edge" id="edge20">
   <title>
    1.G-&gt;2.G
   </title>
   <path d="M422.125,-378.852C447.664,-382.617 486.347,-388.32 511.994,-392.102" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="467" y="-392.8">
    ==
   </text>
  </g>
  <!-- 1.B&#45;&gt;1.D -->
  <g class="edge" id="edge7">
   <title>
    1.B-&gt;1.D
   </title>
   <path d="M233.514,-177.24C242.682,-172.914 252.381,-168.337 260.966,-164.286" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="231.771,-174.193 224.222,-181.626 234.759,-180.523 231.771,-174.193" stroke="#000000">
   </polygon>
  </g>
  <!-- 1.B&#45;&gt;1.E -->
  <g class="edge" id="edge6">
   <title>
    1.B-&gt;1.E
   </title>
   <path d="M217.819,-167.723C234.731,-145.301 258.599,-113.656 273.419,-94.0059" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="214.939,-165.73 211.711,-175.821 220.527,-169.945 214.939,-165.73" stroke="#000000">
   </polygon>
  </g>
  <!-- 1.C -->
  <g class="node" id="node8">
   <title>
    1.C
   </title>
   <polygon fill="#ccffcc" points="566.436,-190 512.436,-190 512.436,-154 566.436,-154 566.436,-190" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="539.436" y="-168.3">
    1.C
   </text>
  </g>
  <!-- 1.B&#45;&gt;1.C -->
  <g class="edge" id="edge2">
   <title>
    1.B-&gt;1.C
   </title>
   <path d="M234.344,-193.809C290.296,-193.171 400.832,-190.544 494,-180 499.92,-179.33 506.241,-178.353 512.203,-177.31" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="234.19,-190.31 224.225,-193.909 234.259,-197.31 234.19,-190.31" stroke="#000000">
   </polygon>
  </g>
  <!-- 1.B&#45;&gt;2.B -->
  <g class="edge" id="edge16">
   <title>
    1.B-&gt;2.B
   </title>
   <path d="M224.034,-211.665C241.157,-221.589 264.487,-232 287,-232 287,-232 287,-232 540.436,-232 561.708,-232 585.826,-232 603.652,-232" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="395" y="-235.8">
    &lt;
   </text>
  </g>
  <!-- 2.H -->
  <g class="node" id="node11">
   <title>
    2.H
   </title>
   <polygon fill="#ffffcc" points="566.436,-306.544 566.436,-321.456 550.62,-332 528.252,-332 512.436,-321.456 512.436,-306.544 528.252,-296 550.62,-296 566.436,-306.544" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="539.436" y="-310.3">
    2.H
   </text>
  </g>
  <!-- 1.H&#45;&gt;2.H -->
  <g class="edge" id="edge19">
   <title>
    1.H-&gt;2.H
   </title>
   <path d="M422.125,-326.249C447.664,-323.559 486.347,-319.486 511.994,-316.785" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="467" y="-327.8">
    ==
   </text>
  </g>
  <!-- 2.I -->
  <g class="node" id="node10">
   <title>
    2.I
   </title>
   <polygon fill="#ffffcc" points="566.436,-347.544 566.436,-362.456 550.62,-373 528.252,-373 512.436,-362.456 512.436,-347.544 528.252,-337 550.62,-337 566.436,-347.544" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="539.436" y="-351.3">
    2.I
   </text>
  </g>
  <!-- 2.I&#45;&gt;2.F -->
  <g class="edge" id="edge15">
   <title>
    2.I-&gt;2.F
   </title>
   <path d="M566.786,-360.598C575.247,-362.395 584.77,-364.418 593.803,-366.337" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="593.202,-369.788 603.711,-368.442 594.656,-362.94 593.202,-369.788" stroke="#000000">
   </polygon>
  </g>
  <!-- 2.H&#45;&gt;2.B -->
  <g class="edge" id="edge12">
   <title>
    2.H-&gt;2.B
   </title>
   <path d="M564.388,-305.054C571.735,-301.639 579.542,-297.273 585.872,-292 596.994,-282.737 606.809,-270.089 614.33,-258.793" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="617.437,-260.43 619.852,-250.114 611.531,-256.672 617.437,-260.43" stroke="#000000">
   </polygon>
  </g>
  <!-- 2.C -->
  <g class="node" id="node12">
   <title>
    2.C
   </title>
   <polygon fill="#ffffcc" points="566.436,-107.544 566.436,-122.456 550.62,-133 528.252,-133 512.436,-122.456 512.436,-107.544 528.252,-97 550.62,-97 566.436,-107.544" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="middle" x="539.436" y="-111.3">
    2.C
   </text>
  </g>
  <!-- 2.C&#45;&gt;2.B -->
  <g class="edge" id="edge11">
   <title>
    2.C-&gt;2.B
   </title>
   <path d="M554.719,-130.638C558.741,-135.193 563.057,-140.229 566.872,-145 582.84,-164.968 599.774,-188.501 612.06,-206.054" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="609.447,-208.427 618.031,-214.637 615.193,-204.429 609.447,-208.427" stroke="#000000">
   </polygon>
  </g>
  <!-- 2.B&#45;&gt;2.A -->
  <g class="edge" id="edge13">
   <title>
    2.B-&gt;2.A
   </title>
   <path d="M658.094,-232C666.423,-232 675.786,-232 684.688,-232" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="684.838,-235.5 694.838,-232 684.838,-228.5 684.838,-235.5" stroke="#000000">
   </polygon>
  </g>
  <!-- 2.G&#45;&gt;2.F -->
  <g class="edge" id="edge14">
   <title>
    2.G-&gt;2.F
   </title>
   <path d="M567.27,-389.399C575.644,-387.339 585.02,-385.033 593.914,-382.845" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="594.799,-386.232 603.673,-380.445 593.126,-379.435 594.799,-386.232" stroke="#000000">
   </polygon>
  </g>
  <!-- 2.F&#45;&gt;2.A -->
  <g class="edge" id="edge9">
   <title>
    2.F-&gt;2.A
   </title>
   <path d="M642.964,-356.303C658.354,-331.749 686.305,-287.153 704.209,-258.586" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="707.296,-260.252 709.641,-249.92 701.364,-256.535 707.296,-260.252" stroke="#000000">
   </polygon>
  </g>
  <!-- 2.E&#45;&gt;2.B -->
  <g class="edge" id="edge10">
   <title>
    2.E-&gt;2.B
   </title>
   <path d="M494.151,-51.405C516.051,-57.1404 546.853,-68.1939 566.872,-88 599.289,-120.071 616.229,-171.632 624.085,-203.572" fill="none" stroke="#000000">
   </path>
   <polygon fill="#000000" points="620.741,-204.645 626.41,-213.595 627.56,-203.063 620.741,-204.645" stroke="#000000">
   </polygon>
  </g>
  <!-- 2C+&#45;&gt;1.C -->
  <g class="edge" id="edge24">
   <title>
    2C+-&gt;1.C
   </title>
   <path d="M423.092,-154.764C442.777,-157.525 470.052,-161.403 494,-165 499.87,-165.882 506.17,-166.857 512.129,-167.792" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <polygon fill="#aa00ff" points="423.395,-151.272 413.007,-153.354 422.426,-158.205 423.395,-151.272" stroke="#aa00ff">
   </polygon>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="467" y="-168.8">
    in
   </text>
  </g>
  <!-- 2C+&#45;&gt;2.C -->
  <g class="edge" id="edge23">
   <title>
    2C+-&gt;2.C
   </title>
   <path d="M412.687,-146.335C420.898,-144.068 430.954,-141.336 440,-139 464.355,-132.711 492.216,-125.959 512.066,-121.224" fill="none" stroke="#aa00ff" stroke-dasharray="5,2">
   </path>
   <text font-family="Times,serif" font-size="14.00" text-anchor="middle" x="467" y="-142.8">
    out
   </text>
  </g>
  <!-- Legend -->
  <g class="node" id="node19">
   <title>
    Legend
   </title>
   <polygon fill="white" points="61,-332 -3.55271e-15,-332 -3.55271e-15,-132 61,-132 61,-332" stroke="black">
   </polygon>
   <polygon fill="none" points="0.5,-307 0.5,-332 61.5,-332 61.5,-307 0.5,-307" stroke="black">
   </polygon>
   <text font-family="Arial Black" font-size="14.00" text-anchor="start" x="8" y="-315.8">
    Nodes
   </text>
   <polygon fill="#ccffcc" points="0.5,-282 0.5,-307 43.5,-307 43.5,-282 0.5,-282" stroke="none">
   </polygon>
   <polygon fill="none" points="0.5,-282 0.5,-307 43.5,-307 43.5,-282 0.5,-282" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="18" y="-290.8">
    1
   </text>
   <polygon fill="none" points="43.5,-282 43.5,-307 61.5,-307 61.5,-282 43.5,-282" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="48.5" y="-290.8">
    9
   </text>
   <polygon fill="#ffffcc" points="0.5,-257 0.5,-282 43.5,-282 43.5,-257 0.5,-257" stroke="none">
   </polygon>
   <polygon fill="none" points="0.5,-257 0.5,-282 43.5,-282 43.5,-257 0.5,-257" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="18" y="-265.8">
    2
   </text>
   <polygon fill="none" points="43.5,-257 43.5,-282 61.5,-282 61.5,-257 43.5,-257" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="48.5" y="-265.8">
    8
   </text>
   <polygon fill="#ffffff" points="0.5,-232 0.5,-257 43.5,-257 43.5,-232 0.5,-232" stroke="none">
   </polygon>
   <polygon fill="none" points="0.5,-232 0.5,-257 43.5,-257 43.5,-232 0.5,-232" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="13" y="-240.8">
    (+)
   </text>
   <polygon fill="none" points="43.5,-232 43.5,-257 61.5,-257 61.5,-232 43.5,-232" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="48.5" y="-240.8">
    1
   </text>
   <polygon fill="none" points="0.5,-207 0.5,-232 61.5,-232 61.5,-207 0.5,-207" stroke="black">
   </polygon>
   <text font-family="Arial Black" font-size="14.00" text-anchor="start" x="6.5" y="-215.8">
    Edges
   </text>
   <polygon fill="none" points="0.5,-182 0.5,-207 43.5,-207 43.5,-182 0.5,-182" stroke="black">
   </polygon>
   <text fill="#000000" font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="5.5" y="-190.8">
    isa_1
   </text>
   <polygon fill="none" points="43.5,-182 43.5,-207 61.5,-207 61.5,-182 43.5,-182" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="48.5" y="-190.8">
    8
   </text>
   <polygon fill="none" points="0.5,-157 0.5,-182 43.5,-182 43.5,-157 0.5,-157" stroke="black">
   </polygon>
   <text fill="#000000" font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="5.5" y="-165.8">
    isa_2
   </text>
   <polygon fill="none" points="43.5,-157 43.5,-182 61.5,-182 61.5,-157 43.5,-157" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="48.5" y="-165.8">
    7
   </text>
   <polygon fill="none" points="0.5,-132 0.5,-157 43.5,-157 43.5,-132 0.5,-132" stroke="black">
   </polygon>
   <text fill="#aa00ff" font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="11" y="-140.8">
    Art.
   </text>
   <polygon fill="none" points="43.5,-132 43.5,-157 61.5,-157 61.5,-132 43.5,-132" stroke="black">
   </polygon>
   <text font-family="Helvetica,sans-Serif" font-size="14.00" text-anchor="start" x="48.5" y="-140.8">
    8
   </text>
  </g>
 </g>
</svg>
    </div>
    <div class="tab-pane fade" id="adjacency1x1">
     <button id="zoomin">
      Zoom in
     </button>
     <button id="zoomout">
      Zoom out
     </button>
     <button id="reset">
      Reset
     </button>
    </div>
    <div class="tab-pane fade" id="adjacency">
     <button id="zoomin">
      Zoom in
     </button>
     <button id="zoomout">
      Zoom out
     </button>
     <button id="reset">
      Reset
     </button>
    </div>
   </div>
  </div>
  <script id="visualization">
   createVisualization();
function createVisualization() {
	var size = {
	  width: document.body.clientWidth || window.innerWidth,
	  height: document.body.clientHeight || window.innerHeight
	}

	var oldSvg = d3.select("div#visualization svg")
	var graphG = d3.select("div#visualization svg g.graph");
	oldSvg.remove();

	var margin = {top: 0, right: 0, bottom: 0, left: 0},
		width = size['width'] - margin.left - margin.right,
		height = size['height'] - 1 - margin.top - margin.bottom;

	var x = d3.scale.linear()
		.domain([-width / 2, width / 2])
		.range([0, width]);

	var y = d3.scale.linear()
		.domain([-height / 2, height / 2])
		.range([height, 0]);

	var zoom = d3.behavior.zoom()
		.x(x)
		.y(y)
		.scaleExtent([0.1, 32])
		.on("zoom", zoom);

	var svg = d3.select("#visualization").append("svg")
		.attr("width", width + margin.left + margin.right)
		.attr("height", height + margin.top + margin.bottom)
		.append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
		.call(zoom)
		.append(function() {
			return graphG.node();
		});

	function zoom() {
		x = d3.event.translate[0]
		y = d3.event.translate[1]
		graphG.attr("transform", "translate(" + d3.event.translate + ") scale(" + d3.event.scale + ")");
	}


	d3.select("div#visualization button#reset").on("click", reset);
	d3.select("div#visualization button#zoomin").on("click", zoomIn);
	d3.select("div#visualization button#zoomout").on("click", zoomOut);

	var originalWidth = Number(oldSvg.attr("width").slice(0, -2));
	var originalHeight = Number(oldSvg.attr("width").slice(0, -2));
	initialScale = Math.min(width/originalWidth, height/originalHeight) * 0.7
	var t = d3.transform(graphG.attr("transform")),
			initialX = (size['width'] - (initialScale * originalWidth))/2, //t.translate[0],
			initialY = size['height'] * 0.8, //t.translate[1],
			initialS = initialScale; //t.scale[0];
			
	function zoomIn() {
		var t = d3.transform(graphG.attr("transform")),
			x = t.translate[0],
			y = t.translate[1],
			s = t.scale[0];
		var newScale = (s + 0.1);
		zoom.scale(newScale)
		graphG.attr("transform", "translate(" + x + " ," + y + ") scale(" + newScale + ")");
	}

	function zoomOut() {
		var t = d3.transform(graphG.attr("transform")),
			x = t.translate[0],
			y = t.translate[1],
			s = t.scale[0];
		var newScale = (s - 0.1);
		zoom.scale(newScale)
		graphG.attr("transform", "translate(" + x + " ," + y + ") scale(" + newScale + ")");
	}

	function reset() {
		initialTranslate = [initialX, initialY];
		zoom.translate(initialTranslate);
		zoom.scale(initialS)
		graphG.attr("transform", "translate(" + initialX + " ," + initialY + ") scale(" + initialS + ")");
	}

	reset(); //removes the random jump after first click issue
}
  </script>
  <script id="adjacency1x1">
   createAdjacency1x1Matrix();
function createAdjacency1x1Matrix() {
	var size = {
	  width: document.body.clientWidth || window.innerWidth,
	  height: document.body.clientHeight || window.innerHeight
	}

	var margin = {top: 0, right: 0, bottom: 0, left: 0},
		width = size['width'] - margin.left - margin.right,
		height = size['height'] - 1 - margin.top - margin.bottom;

	var x = d3.scale.linear()
		.domain([-width / 2, width / 2])
		.range([0, width]);

	var y = d3.scale.linear()
		.domain([-height / 2, height / 2])
		.range([height, 0]);

	var zoom = d3.behavior.zoom()
		.x(x)
		.y(y)
		.scaleExtent([0.1, 32])
		.on("zoom", zoom);

	var canvas = d3.select("#adjacency1x1").append("svg")
		.attr("width", width + margin.left + margin.right)
		.attr("height", height + margin.top + margin.bottom)
		.append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
		.call(zoom);

	var content = canvas.append("g");
		
	var cellWidth = 25;

	var data = JSON.parse(document.getElementById('dataAdjacency1x1').innerHTML);

	/*var i = data['links'].length
	while (i--) {
		l = data['links'][i];
		if (l.relation.startsWith("taxonomy")) {
			data['links'].splice(i, 1);
		}
	}*/

	//sort nodes
	for (i in data['links']) {
		l = data['links'][i];
		l.source = data['nodes'][l.source].id
		l.target = data['nodes'][l.target].id
	}
	data['nodes'] = data['nodes'].sort(function(a, b) { 
										return d3.ascending(a.id, b.id); 
								});
		
	groupNodes = { }
	for (i in data['nodes']) {
		n = data['nodes'][i];
		id = n.group;
		if (id in groupNodes) {
			groupNodes[id].push(n);
		} else {
			groupNodes[id] = [];
			groupNodes[id].push(n);
		}
	}
	if(Object.keys(groupNodes).length != 2) {
		return;
	}
	dataNodesA = groupNodes[Object.keys(groupNodes)[0]]
	dataNodesB = groupNodes[Object.keys(groupNodes)[1]]
						
	//sort links for legend
	data['links'] = data['links'].sort(function(a, b) { 
									if(a.relation.startsWith("taxonomy") && b.relation.startsWith("taxonomy")) {
										idA = a.relation.split(".")[1];
										idB = b.relation.split(".")[1];
										if (idA == idB) {
											return d3.ascending(a.relation, b.relation);
										}
										return d3.ascending(idA, idB);
									}
									return d3.ascending(a.relation, b.relation); 
								});
	for (i in data['links']) {
		l = data['links'][i];
		l.source = dataNodesA.map(function (n) {
										return n.id;
									}).indexOf(l.source)
		l.target = dataNodesB.map(function (n) {
										return n.id;
									}).indexOf(l.target)
	}

	var linksMap = { };
	for (i in data['links']) {
		var l = data['links'][i];
		linksMap[l.source + ";" + l.target] = l;
	}
	var cells = [];
	for (i in dataNodesA) {
		for (j in dataNodesB) {
			var id = i + ";" + j;
			cells.push({ 
						id: id,
						source: i, 
						target: j, 
						relation: id in linksMap ? linksMap[id].relation : ""
					});
		}
	}
	/*
	c20 = d3.scale.category20();
	colorIndex = 0;
	var colors = { 
			"" : "white",
			"equals" : c20(colorIndex++),
			"disjoint" : c20(colorIndex++),
			"includes" : c20(colorIndex++),
			"is_included_in" : c20(colorIndex++),
			"overlaps" : c20(colorIndex++)
	}
	*/

	var colors = {
		"" : "white",
		"equals" : "#7f7f7f", //dark gray
		"disjoint" : "#c7c7c7", //light gray
		"includes" : "#e6550d", //dark orange
		"is_included_in" : "#fd8d3c", //light orange
		"overlaps" : "#d62728" //red
	}

	//var taxonomyPairColors = ["#393b79", "#5254a3", "#637939", "#8ca252", "#8c6d31", "#bd9e39", "#843c39", "#ad494a", "#7b4173", "#a55194"];
	//colorIndex = 0;
	for (i in data['links']) {
		var l = data['links'][i];
		/*if (!(l.relation in colors)) {
			colors[l.relation] = taxonomyPairColors[colorIndex];
			colorIndex = colorIndex + 1 % 4;
		}*/
		cells.push({ 
					id: l.source + ";" + l.target, 
					source: l.source, 
					target: l.target, 
					relation: l.relation 
				});
	}

	var x = d3.scale.linear()
		.domain([-width / 2, width / 2])
		.range([0, width]);

	var y = d3.scale.linear()
		.domain([-height / 2, height / 2])
		.range([height, 0]);

	adjacencyView = content.append("g")
			  .attr("transform", "translate(90,90)");
			adjacencyView.selectAll("rect")
			  .data(cells)
			  .enter()
			  .append("rect")
			  .attr("width", cellWidth)
			  .attr("height", cellWidth)
			  .attr("x", function (d) {return d.target * cellWidth})
			  .attr("y", function (d) {return d.source * cellWidth})
			  .style("fill", function(d) { return colors[d.relation]; })
			  .style("stroke", "black")
			  .on("mouseover", mouseover)
			  .on("mouseout", mouseout);
			
	var matrixScaleA = d3.scale.ordinal()
						.domain(dataNodesA.map(function (n) {
											console.log("scalea " + n);
											return n.id
										}))
						.rangePoints([0, dataNodesA.length * cellWidth], 1);
	var matrixScaleB = d3.scale.ordinal()
						.domain(dataNodesB.map(function (n) {
											console.log("scaleb " + n);
											return n.id
										}))
						.rangePoints([0, dataNodesB.length * cellWidth], 1);						
	/*tickValues = []
	for (i = 0; i < data['nodes'].length - 2; i++) { 
		tickValues.push(i * cellWidth + 0.5 * cellWidth)
	}*/
	/*for (i in data['nodes']) {
		console.log(i);
		console.log(i * cellWidth);
		console.log(i * cellWidth - 0.5 * cellWidth);
		tickValues.push(i * cellWidth - 0.5 * cellWidth)
		
	}
	console.log(tickValues);*/
	xAxis = d3.svg.axis()
				.scale(matrixScaleB)
				//.tickValues(tickValues)
				.orient("top")
				.tickSize(0); 
	yAxis = d3.svg.axis()
				.scale(matrixScaleA)
				//.tickValues(tickValues)
				.orient("left")
				.tickSize(0);    
	adjacencyView.append("g")
				.call(xAxis)
				.selectAll("text")
				.style("text-anchor", "end")
				.attr("transform", "translate(-8,-10) rotate(90)");
	adjacencyView.append("g")
				.call(yAxis)
				.attr("transform", "translate(-10, 0)");
	  
	function mouseover(d, i) {
		d3.selectAll("div#adjacency1x1 rect")
			/*.style("stroke", function(o) {
				return (o.source == d.source || o.target == d.target) ? "black" : "gray";
			})*/
			.style("stroke-width", function(o) {
				return (o.source == d.source || o.target == d.target) ? "3px" : "1px";
			});
		d3.selectAll("div#adjacency1x1 g#legend g text").classed("activeLegend", function(c, i) { 
													return c == d.relation;
												});
		d3.selectAll("div#adjacency1x1 g.tick text").classed("activeTick", function(c, i) {
													return dataNodesA[d.source].id == c || dataNodesB[d.target].id == c;
												});
	}

	function mouseout() {
		d3.selectAll("div#adjacency1x1 rect").style("stroke-width", "1px");
		d3.selectAll("div#adjacency1x1 legend g text").classed("activeLegend", false);
		d3.selectAll("div#adjacency1x1 g.tick text").classed("activeTick", false);
	}

	content.append("g").append("text").text("From").style("font-weight", "bold").attr("transform", "translate(5, 70)");
	content.append("g").append("text").text("To").style("font-weight", "bold").attr("transform", "translate(60, 30)");

	legend = []
	for (c in colors) {
		if (c != "") { 
			legend.push(c);
		}
	}
	adjacencyViewLegend = content.append("g")
		.attr("transform", "translate(" + (((dataNodesA.length + dataNodesB.length) * cellWidth) + 150) + ", 80)")
		.attr("id", "legend");
	legendGs = adjacencyViewLegend.selectAll("g")
	  .data(legend);
	legendG = legendGs.enter()
	  .append("g")
	legendG.append("rect")
	  .attr("width", cellWidth)
	  .attr("height", cellWidth)
	  .attr("x", function (d, i) {return 0; })
	  .attr("y", function (d, i) {return i * cellWidth})
	  .style("fill", function(d) { return colors[d]; })
	  .style("stroke", "black");
	legendG.append("text")
	  .text(function(d) { return d; })
	  .attr("x", function (d, i) { return 40; })
	  .attr("y", function (d, i) { return (i * (cellWidth)) + 18; });	

	function zoom() {
		x = d3.event.translate[0]
		y = d3.event.translate[1]
		content.attr("transform", "translate(" + d3.event.translate + ") scale(" + d3.event.scale + ")");
	}

	d3.select("div#adjacency1x1 button#reset").on("click", reset);
	d3.select("div#adjacency1x1 button#zoomin").on("click", zoomIn);
	d3.select("div#adjacency1x1 button#zoomout").on("click", zoomOut);


	var originalWidth = dataNodesB.length * cellWidth + 100;
	var originalHeight = dataNodesA.length * cllWidth + 100;
	initialScale = Math.min(width/originalWidth, height/originalHeight) * 0.7
	var t = d3.transform(canvas.attr("transform")),
			initialX = (size['width'] - (initialScale * originalWidth))/2, //t.translate[0],
			initialY = 20, //t.translate[1],
			initialS = initialScale; //t.scale[0];

	function zoomIn() {
		var t = d3.transform(content.attr("transform")),
			x = t.translate[0],
			y = t.translate[1],
			s = t.scale[0];
		var newScale = (s + 0.1);
		zoom.scale(newScale)
		content.attr("transform", "translate(" + x + " ," + y + ") scale(" + newScale + ")");
	}

	function zoomOut() {
		var t = d3.transform(content.attr("transform")),
			x = t.translate[0],
			y = t.translate[1],
			s = t.scale[0];
		var newScale = (s - 0.1);
		zoom.scale(newScale)
		content.attr("transform", "translate(" + x + " ," + y + ") scale(" + newScale + ")");
	}

	function reset() {
		initialTranslate = [initialX, initialY];
		zoom.translate(initialTranslate);
		zoom.scale(initialS)
		content.attr("transform", "translate(" + initialX + " ," + initialY + ") scale(" + initialS + ")");
	}

	reset(); //removes the random jump after first click issue
}
  </script>
  <script id="adjacency">
   createAdjacencyMatrix();
function createAdjacencyMatrix() {
	var size = {
	  width: document.body.clientWidth || window.innerWidth,
	  height: document.body.clientHeight || window.innerHeight
	}

	var margin = {top: 0, right: 0, bottom: 0, left: 0},
		width = size['width'] - margin.left - margin.right,
		height = size['height'] - 1 - margin.top - margin.bottom;

	var x = d3.scale.linear()
		.domain([-width / 2, width / 2])
		.range([0, width]);

	var y = d3.scale.linear()
		.domain([-height / 2, height / 2])
		.range([height, 0]);

	var zoom = d3.behavior.zoom()
		.x(x)
		.y(y)
		.scaleExtent([0.1, 32])
		.on("zoom", zoom);

	var canvas = d3.select("#adjacency").append("svg")
		.attr("width", width + margin.left + margin.right)
		.attr("height", height + margin.top + margin.bottom)
		.append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
		.call(zoom);

	var content = canvas.append("g");
		
	var cellWidth = 25;

	var data = JSON.parse(document.getElementById('dataAdjacency').innerHTML);

	//sort nodes
	for (i in data['links']) {
		l = data['links'][i];
		l.source = data['nodes'][l.source].id
		l.target = data['nodes'][l.target].id
	}
	data['nodes'] = data['nodes'].sort(function(a, b) { 
										return d3.ascending(a.id, b.id); 
									});
	//sort links for legend
	data['links'] = data['links'].sort(function(a, b) { 
									if(a.relation.startsWith("taxonomy") && b.relation.startsWith("taxonomy")) {
										idA = a.relation.split(".")[1];
										idB = b.relation.split(".")[1];
										if (idA == idB) {
											return d3.ascending(a.relation, b.relation);
										}
										return d3.ascending(idA, idB);
									}
									return d3.ascending(a.relation, b.relation); 
								});
	for (i in data['links']) {
		l = data['links'][i];
		l.source = data['nodes'].map(function (n) {
										return n.id;
									}).indexOf(l.source)
		l.target = data['nodes'].map(function (n) {
										return n.id;
									}).indexOf(l.target)
	}

	var linksMap = { };
	for (i in data['links']) {
		var l = data['links'][i];
		linksMap[l.source + ";" + l.target] = l;
	}
	var cells = [];
	for (i in data['nodes']) {
		for (j in data['nodes']) {
			var id = i + ";" + j;
			cells.push({ 
						id: id,
						source: i, 
						target: j, 
						relation: id in linksMap ? linksMap[id].relation : ""
					});
		}
	}
	/*
	c20 = d3.scale.category20();
	colorIndex = 0;
	var colors = { 
			"" : "white",
			"equals" : c20(colorIndex++),
			"disjoint" : c20(colorIndex++),
			"includes" : c20(colorIndex++),
			"is_included_in" : c20(colorIndex++),
			"overlaps" : c20(colorIndex++)
	}
	*/

	var colors = {
		"" : "white",
		"equals" : "#7f7f7f", //dark gray
		"disjoint" : "#c7c7c7", //light gray
		"includes" : "#e6550d", //dark orange
		"is_included_in" : "#fd8d3c", //light orange
		"overlaps" : "#d62728" //red
	}

	var taxonomyPairColors = ["#393b79", "#5254a3", "#637939", "#8ca252", "#8c6d31", "#bd9e39", "#843c39", "#ad494a", "#7b4173", "#a55194"];
	colorIndex = 0;
	for (i in data['links']) {
		var l = data['links'][i];
		if (!(l.relation in colors)) {
			colors[l.relation] = taxonomyPairColors[colorIndex];
			colorIndex = colorIndex + 1 % 4;
		}
		cells.push({ 
					id: l.source + ";" + l.target, 
					source: l.source, 
					target: l.target, 
					relation: l.relation 
				});
	}

	var x = d3.scale.linear()
		.domain([-width / 2, width / 2])
		.range([0, width]);

	var y = d3.scale.linear()
		.domain([-height / 2, height / 2])
		.range([height, 0]);

	adjacencyView = content.append("g")
			  .attr("transform", "translate(90,90)");
			adjacencyView.selectAll("rect")
			  .data(cells)
			  .enter()
			  .append("rect")
			  .attr("width", cellWidth)
			  .attr("height", cellWidth)
			  .attr("x", function (d) {return d.target * cellWidth})
			  .attr("y", function (d) {return d.source * cellWidth})
			  .style("fill", function(d) { return colors[d.relation]; })
			  .style("stroke", "black")
			  .on("mouseover", mouseover)
			  .on("mouseout", mouseout);
			
	var matrixScale = d3.scale.ordinal()
						.domain(data['nodes'].map(function (n) {
											return n.id
										}))
						.rangePoints([0, data['nodes'].length * cellWidth], 1);
						
	/*tickValues = []
	for (i = 0; i < data['nodes'].length - 2; i++) { 
		tickValues.push(i * cellWidth + 0.5 * cellWidth)
	}*/
	/*for (i in data['nodes']) {
		console.log(i);
		console.log(i * cellWidth);
		console.log(i * cellWidth - 0.5 * cellWidth);
		tickValues.push(i * cellWidth - 0.5 * cellWidth)
		
	}
	console.log(tickValues);*/
	xAxis = d3.svg.axis()
				.scale(matrixScale)
				//.tickValues(tickValues)
				.orient("top")
				.tickSize(0); 
	yAxis = d3.svg.axis()
				.scale(matrixScale)
				//.tickValues(tickValues)
				.orient("left")
				.tickSize(0);    
	adjacencyView.append("g")
				.call(xAxis)
				.selectAll("text")
				.style("text-anchor", "end")
				.attr("transform", "translate(-8,-10) rotate(90)");
	adjacencyView.append("g")
				.call(yAxis)
				.attr("transform", "translate(-10, -10)");
	  
	function mouseover(d, i) {
		d3.selectAll("div#adjacency rect")
			/*.style("stroke", function(o) {
				return (o.source == d.source || o.target == d.target) ? "black" : "gray";
			})*/
			.style("stroke-width", function(o) {
				return (o.source == d.source || o.target == d.target) ? "3px" : "1px";
			});
		d3.selectAll("div#adjacency g#legend g text").classed("activeLegend", function(c, i) { 
													return c == d.relation;
												});
		d3.selectAll("div#adjacency g.tick text").classed("activeTick", function(c, i) {
													return data['nodes'][d.source].id == c || data['nodes'][d.target].id == c;
												});
	}

	function mouseout() {
		d3.selectAll("div#adjacency rect").style("stroke-width", "1px");
		d3.selectAll("div#adjacency legend g text").classed("activeLegend", false);
		d3.selectAll("div#adjacency g.tick text").classed("activeTick", false);
	}

	content.append("g").append("text").text("From").style("font-weight", "bold").attr("transform", "translate(5, 70)");
	content.append("g").append("text").text("To").style("font-weight", "bold").attr("transform", "translate(60, 30)");

	legend = []
	for (c in colors) {
		if (c != "") { 
			legend.push(c);
		}
	}
	adjacencyViewLegend = content.append("g")
		.attr("transform", "translate(" + ((data['nodes'].length * cellWidth) + 150) + ", 80)")
		.attr("id", "legend");
	legendGs = adjacencyViewLegend.selectAll("g")
	  .data(legend);
	legendG = legendGs.enter()
	  .append("g")
	legendG.append("rect")
	  .attr("width", cellWidth)
	  .attr("height", cellWidth)
	  .attr("x", function (d, i) {return 0; })
	  .attr("y", function (d, i) {return i * cellWidth})
	  .style("fill", function(d) { return colors[d]; })
	  .style("stroke", "black");
	legendG.append("text")
	  .text(function(d) { return d; })
	  .attr("x", function (d, i) { return 40; })
	  .attr("y", function (d, i) { return (i * (cellWidth)) + 18; });	

	function zoom() {
		x = d3.event.translate[0]
		y = d3.event.translate[1]
		content.attr("transform", "translate(" + d3.event.translate + ") scale(" + d3.event.scale + ")");
	}

	d3.select("div#adjacency button#reset").on("click", reset);
	d3.select("div#adjacency button#zoomin").on("click", zoomIn);
	d3.select("div#adjacency button#zoomout").on("click", zoomOut);


	var originalWidth = data['nodes'].length * cellWidth + 100;
	var originalHeight = data['nodes'].length * cellWidth + 100;
	initialScale = Math.min(width/originalWidth, height/originalHeight) * 0.7
	var t = d3.transform(canvas.attr("transform")),
			initialX = (size['width'] - (initialScale * originalWidth))/2, //t.translate[0],
			initialY = 20, //t.translate[1],
			initialS = initialScale; //t.scale[0];

	function zoomIn() {
		var t = d3.transform(content.attr("transform")),
			x = t.translate[0],
			y = t.translate[1],
			s = t.scale[0];
		var newScale = (s + 0.1);
		zoom.scale(newScale)
		content.attr("transform", "translate(" + x + " ," + y + ") scale(" + newScale + ")");
	}

	function zoomOut() {
		var t = d3.transform(content.attr("transform")),
			x = t.translate[0],
			y = t.translate[1],
			s = t.scale[0];
		var newScale = (s - 0.1);
		zoom.scale(newScale)
		content.attr("transform", "translate(" + x + " ," + y + ") scale(" + newScale + ")");
	}

	function reset() {
		initialTranslate = [initialX, initialY];
		zoom.translate(initialTranslate);
		zoom.scale(initialS)
		content.attr("transform", "translate(" + initialX + " ," + initialY + ") scale(" + initialS + ")");
	}

	reset(); //removes the random jump after first click issue
}
  </script>
 </body>
</html>